@page "/reports"
@attribute [Authorize(Roles = "SuperAdmin,Manager")]

@using EcoRoute.UI.Services.ReportsServices
@using EcoRoute.UI.Pages.Components.Reports
@using EcoRoute.DtoLayer.ReportsDtos
@using Microsoft.AspNetCore.Authorization
@inject IReportService ReportService

<div class="bg-white dark:bg-gray-900 shadow-md rounded-lg overflow-hidden animate-fadeIn">
    <div class="flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700">
        <h2 class="text-2xl font-semibold text-gray-800 dark:text-white">Raporlar Paneli</h2>
        <span class="px-3 py-1 bg-primary-100 text-primary-600 dark:bg-primary-900/30 dark:text-primary-300 text-xs rounded-md">
            Beta
        </span>
    </div>
    <div class="px-6 pt-4 pb-2 border-b border-gray-200 dark:border-gray-700">
        <div class="flex flex-wrap gap-3">
            <button class="@GetTabClass(0)" @onclick="@(() => ActiveTab = 0)">
                Atık Kutusu
            </button>
            <button class="@GetTabClass(1)" @onclick="@(() => ActiveTab = 1)">
                Sensörler
            </button>
            <button class="@GetTabClass(2)" @onclick="@(() => ActiveTab = 2)">
                Rota Performansı
            </button>
            <button class="@GetTabClass(3)" @onclick="@(() => ActiveTab = 3)">
                CO₂ Emisyonu
            </button>
            <button class="@GetTabClass(4)" @onclick="@(() => ActiveTab = 4)">
                Kullanıcı Aktivitesi
            </button>
            <button class="@GetTabClass(5)" @onclick="@(() => ActiveTab = 5)">
                Genel Rota Listesi
            </button>
        </div>
    </div>

    <div class="p-6">
        @switch (ActiveTab)
        {
            case 0:
                <WasteBinReport />
                break;
            case 1:
                <SensorReport />
                break;
            case 2:
                <RoutePerformanceReport />
                break;
            case 3:
                <CO2Report />
                break;
            case 4:
                <UserActivityReport />
                break;
            case 5:
                <RouteListReport />
                break;
        }
    </div>
</div>

@code {
    private int ActiveTab = 0;

    private string GetTabClass(int tab)
        => $"px-4 py-2 rounded-lg transition text-sm " +
           (ActiveTab == tab
                ? "bg-primary-500 text-white shadow"
                : "bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-primary-200 dark:hover:bg-primary-700");

    // Bileşenler ayrı dosyada, aşağıdaki gibi olacak:
    // <WasteBinReport />
    // <SensorReport />
    // <RoutePerformanceReport />
    // <CO2Report />
    // <UserActivityReport />
    // <RouteListReport />
}
